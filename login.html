<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<title>Login</title>


	<!-- Stylesheets -->
	<link rel="stylesheet" href="font/sag/style.css">
	<link rel="stylesheet" href="css/animate.css">
	<link rel="stylesheet" type="text/css" href="css/universal.css" />
	<link rel="stylesheet" href="css/login.css">

		 <script src="js/modernizr.custom_modal.js"></script>

</head>

<body>

			<div class="md-modal md-effect-12" id="modal-12">
					<div class="md-content">
							<div>
									<p>You're in deep shit then!</p>
									<button class="md-close">Tap screen to close</button>
							</div>
					</div>
			</div>

		<div class="header">
				<h1>Login</h1>
		</div>

		<div class="content">

			 <div class="form">
					<input type="text" class="input" placeholder="Name" id="username">
					<input type="password" class="input" placeholder="Password" id="password">
			</div>

			<div class="problems">
				<a href="#" class="btn2 md-trigger" data-modal="modal-12">Problems with login?</a>
			</div>



		</div>

					<div class="btn btntxt">Login <span class="icon-arrow-right-small"></span></div>

									 <div class="md-overlay"></div><!-- the overlay element -->

		<!-- Scripts -->

		<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js'></script>
		<script src="js/classie_menu.js"></script>
		<script src="js/modalEffects.js"></script>
		<script src="js/scripts.js"></script>

		<script>

			//Animate.css
			$(document).ready(function(){
				$('h1').addClass('animated pulse');
				$('input, select').addClass('animated bounceInUp');
				$('.btn').addClass('animated bounceInUp');
			});

			//On .btn.btntxt click
			$('.btn.btntxt').one( "click", function() {
				//TODO: Validate.

				var endpoint = "http://vm0063.virtues.fi/authentication/";
				var username = $('#username').val();
				var password = $('#password').val();
				var authorization = make_base_auth(username, password);

				$.ajax({
					type: "GET",
					url: endpoint,
					dataType: 'json',
					beforeSend: function (xhr) {
						xhr.setRequestHeader ("Authorization", authorization);
					}
				}).done(function( data ) {
						localStorage.authorization=authorization;
						localStorage.color=data['color'];
						window.location.replace("home.html");
				}).fail(function( jqXHR, textStatus ) {
					//TODO fix this - Error message needed
						//alert( "Request failed: " + textStatus );
						window.location.replace("login.html");
				});

			});




		</script>

</body>
</html>
